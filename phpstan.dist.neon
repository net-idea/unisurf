# phpstan.dist.neon â€“ Symfony 6/7 + PHP 8.3/8.4

includes:
    - vendor/phpstan/phpstan/conf/bleedingEdge.neon
    - vendor/phpstan/phpstan-doctrine/extension.neon
    - vendor/phpstan/phpstan-doctrine/rules.neon
    - vendor/phpstan/phpstan-symfony/extension.neon
    - vendor/phpstan/phpstan-symfony/rules.neon
    - vendor/phpstan/phpstan-deprecation-rules/rules.neon
    - vendor/phpstan/phpstan-strict-rules/rules.neon
    - phpstan-baseline.neon

parameters:
    phpVersion: 80400 # or 80300
    level: 4
    paths:
        - src
        - tests
    # Exclude some generated/third-party paths from analysis to reduce noise
    excludePaths:
        - %currentWorkingDirectory%/migrations/*
        - %currentWorkingDirectory%/public/*
        - %currentWorkingDirectory%/assets/*
        - %currentWorkingDirectory%/vendor/*
        - %currentWorkingDirectory%/templates/compiled/*
        # Always ignore
        - src/Kernel.php
        # Optional project dirs
        - src/Migrations/*
        - src/DataFixtures/*
    ignoreErrors:
        # Symfony 7 + PHP 8.4 bekannte False-Positives
        - '#^Call to method setParameter\(\) on an unknown class Symfony\\Component\\DependencyInjection\\Loader\\Configurator\\ContainerConfigurator\.$#'
        # Simplified pattern to avoid PHPStan/YAML regex parsing issues (original pattern contained an unescaped '$')
        - '#Parameter .*ConfigurationExtensionInterface.*PrependExtensionInterface.*#'
        - '#^Method .*::getRepository\(\) should return .* but returns object\.$#'
    treatPhpDocTypesAsCertain: true
    # Do not fail the run if an ignored-error pattern doesn't match any reported error.
    # This is a pragmatic, low-risk setting to avoid CI failures from stale/legacy ignore patterns.
    reportUnmatchedIgnoredErrors: false
    # Symfony-Plugin
    symfony:
        containerXmlPath: var/cache/dev/App_KernelDevDebugContainer.xml
    # Doctrine-Plugin
    # doctrine:
    #     objectManagerLoader: phpstan/doctrine/object-manager-loader.php
    parallel:
        maximumNumberOfProcesses: 12
        processTimeout: 600.0
    # Optional: Baseline (nach dem ersten Lauf aktivieren)
    # includes:
    #     - phpstan-baseline.neon
